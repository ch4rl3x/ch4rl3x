{{ define "main" -}}
<div class="posts">
  {{ $paginator := .Paginate (where (where .Site.RegularPages "Type" "blog") "Kind" "page") }}
  {{ range $paginator.Pages }}
    <article class="post">
      <h1 class="post-title">
        <a href="{{ .Permalink }}">{{ .Title }}</a>
      </h1>
      <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z0700" }}" class="post-date">{{ .Date.Format "Mon, Jan 2, 2006" }}</time>

      {{ $taxonomy := "tags" }} {{ with .Param $taxonomy }}
        {{ range $index, $tag := . }} {{ with $.Site.GetPage (printf "/%s/%s" $taxonomy $tag) -}}
        <a href="{{ .Permalink }}"><span class="badge">{{ $tag | urlize }}</span></a>
        {{- end -}} {{- end -}}
      {{ end }}

      <br>
      <br>


      {{ .Summary }}
      {{ if .Truncated }}
      <div class="read-more-link">
        <a href="{{ .RelPermalink }}">Read Moreâ€¦</a>
      </div>
      {{ end }}
    </article>
  {{- end }}

  {{ partial "pagination.html" . }}
</div>
{{- end }}
